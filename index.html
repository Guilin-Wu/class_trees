<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClassTree - 班级小树成长系统</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-slate-50 text-slate-800 font-sans selection:bg-emerald-200">

    <header class="sticky top-0 z-30 bg-white/80 backdrop-blur-md border-b border-gray-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <div class="bg-emerald-100 p-2 rounded-lg">
                    <i data-lucide="sprout" class="w-6 h-6 text-emerald-600"></i>
                </div>
                <h1 id="app-title" class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-emerald-600 to-teal-500 hidden md:block">
                    班级小树
                </h1>
            </div>

            <div class="flex items-center gap-4 flex-1 max-w-2xl mx-4 lg:mx-8">
                <div class="relative flex-1 group">
                    <i data-lucide="search" class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"></i>
                    <input type="text" id="search-input" placeholder="搜索..." class="w-full bg-gray-100 border-transparent focus:bg-white border focus:border-emerald-300 rounded-full py-2 pl-10 pr-4 text-sm transition-all outline-none">
                </div>
                <div class="hidden sm:flex bg-gray-100 rounded-lg p-1" id="view-toggles">
                    <button data-mode="grid" class="p-2 rounded-md transition-all bg-white shadow text-emerald-600"><i data-lucide="grid" class="w-4 h-4"></i></button>
                    <button data-mode="forest" class="p-2 rounded-md transition-all text-gray-400"><i data-lucide="layers" class="w-4 h-4"></i></button>
                    <button data-mode="seats" class="p-2 rounded-md transition-all text-gray-400"><i data-lucide="armchair" class="w-4 h-4"></i></button>
                </div>
            </div>

            <div class="flex items-center gap-2">
                <button id="btn-shop" class="p-2 text-amber-500 hover:bg-amber-100 rounded-lg transition-colors" title="兑换商店"><i data-lucide="store" class="w-5 h-5"></i></button>
                <button id="btn-lucky" class="p-2 text-purple-500 hover:bg-purple-100 rounded-lg transition-colors"><i data-lucide="dice-5" class="w-5 h-5"></i></button>
                <button id="btn-daily" class="p-2 text-blue-500 hover:bg-blue-100 rounded-lg transition-colors"><i data-lucide="calendar" class="w-5 h-5"></i></button>
                <button id="btn-stats" class="p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors"><i data-lucide="trophy" class="w-5 h-5"></i></button>
                <button id="btn-manage" class="flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-full text-sm font-medium hover:bg-slate-800 transition-colors shadow-lg shadow-slate-200">
                    <i data-lucide="settings" class="w-4 h-4"></i> <span class="hidden sm:inline" id="lbl-manage">管理</span>
                </button>
            </div>
        </div>
    </header>

    <main id="main-container" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 min-h-[calc(100vh-4rem)]">
        </main>

    <div id="batch-bar" class="fixed bottom-6 left-1/2 -translate-x-1/2 z-40 bg-white rounded-full shadow-2xl border border-gray-200 p-2 px-6 flex items-center gap-4 hidden opacity-0 transition-opacity duration-300">
        <span class="font-bold text-gray-700 whitespace-nowrap"><span id="batch-count">0</span> <span id="lbl-selected">已选</span></span>
        <div class="h-6 w-px bg-gray-300 mx-2"></div>
        <button onclick="app.batchScore(1)" class="p-2 hover:bg-emerald-50 text-emerald-600 rounded-full font-bold flex items-center gap-1">+1</button>
        <button onclick="app.batchScore(5)" class="p-2 hover:bg-emerald-50 text-emerald-600 rounded-full font-bold flex items-center gap-1">+5</button>
        <div class="h-6 w-px bg-gray-300 mx-2"></div>
        <input type="number" id="batch-custom-score" placeholder="自定义" class="w-20 p-1 text-sm border rounded text-center">
        <button onclick="app.batchCustomScore()" class="text-sm bg-slate-800 text-white px-3 py-1 rounded-full">OK</button>
        <div class="h-6 w-px bg-gray-300 mx-2"></div>
        <button onclick="app.clearSelection()" class="text-gray-400 hover:text-gray-600 text-sm font-medium" id="lbl-clear">取消</button>
    </div>

    <div id="batch-bar" class="fixed bottom-6 left-1/2 -translate-x-1/2 z-40 bg-white/90 backdrop-blur shadow-2xl border border-gray-200 p-2 px-6 rounded-full flex items-center gap-4 hidden opacity-0 transition-all duration-300 transform translate-y-0">
        <span class="font-bold text-gray-700 whitespace-nowrap text-sm"><span id="batch-count" class="text-emerald-600 font-black">0</span> 已选</span>
        <div class="h-4 w-px bg-gray-300 mx-1"></div>
        
        <button onclick="app.batchScore(1)" class="w-8 h-8 rounded-full bg-emerald-100 text-emerald-600 font-bold hover:bg-emerald-200 transition-colors flex items-center justify-center">+1</button>
        <button onclick="app.batchScore(5)" class="w-8 h-8 rounded-full bg-emerald-100 text-emerald-600 font-bold hover:bg-emerald-200 transition-colors flex items-center justify-center">+5</button>
        
        <div class="h-4 w-px bg-gray-300 mx-1"></div>
        
        <input type="number" id="batch-custom-score" placeholder="+/-" class="w-16 p-1 text-sm border border-gray-200 rounded text-center outline-none focus:border-emerald-500 bg-gray-50">
        <button onclick="app.batchCustomScore()" class="text-xs bg-slate-800 text-white px-3 py-1.5 rounded-full hover:bg-slate-700 font-bold">OK</button>
        
        <div class="h-4 w-px bg-gray-300 mx-1"></div>
        <button onclick="app.clearSelection()" class="text-gray-400 hover:text-red-500 text-xs font-bold flex items-center gap-1"><i data-lucide="x" class="w-3 h-3"></i></button>
    </div>

    <div id="modal-container"></div>

    <script src="script.js"></script>
</body>
</html>